Using account ID: sanatmouli-clqab3ddm

âš  Skipping baseline evaluation
âœ“ Loaded existing baseline results

âš  Skipping dataset upload
âœ“ Using existing dataset: querygpt-sft-dataset-v2

âš  Skipping fine-tuning, using model: accounts/sanatmouli-clqab3ddm/models/querygpt-sft-20260108-024800

âš  Note: Fine-tuned model will be used for evaluation once it's deployed.
   If the model isn't available yet, you may need to deploy it manually or wait.

================================================================================
STEP 6: POST-TUNING EVALUATION
================================================================================

Loading evaluation data from evaluation_data.json...
âœ“ Loaded 34 test cases

Using fine-tuned model for evaluation: accounts/sanatmouli-clqab3ddm/models/querygpt-sft-20260108-024800
Note: If you get an error, the model may need to be deployed first.
Check the Fireworks dashboard to deploy the model, or it may auto-deploy.

Initializing QueryGPT with model: accounts/sanatmouli-clqab3ddm/models/querygpt-sft-20260108-024800
âœ“ QueryGPT initialized

Loading database...
âœ“ Database loaded

Running evaluation...

================================================================================
Evaluating 34 test cases
================================================================================

  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_PQhsuEH9zXJawrNpLQe6RtS7', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query asks about trips and cities, which are core elements of the mobility domain. The intent is to count trips per city, which aligns with mobility-related analytics."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_5n1iZx7Q5enVq9rtk3uKmxpQ', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query asks about cities and trip revenue, which are key elements in the mobility domain. The focus on total trip revenue by city indicates a need to analyze trip data across locations, fitting well within the mobility workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_Uj1gnxjPyscHw7MBEvhfuxJp', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query is about drivers and trips, which are core elements of the mobility domain. The intent is to identify the driver with the highest number of completed trips, which aligns with mobility-related analytics."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_IQlurlwOnBzUhtn9DBdfgckz', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query asks about driver ratings, which is directly related to driver performance and service quality in the mobility domain. Keywords like \'driver\' and \'rating\' are strongly associated with mobility operations, particularly in trip or service evaluation contexts."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_WL9uk7x0UaO064fahGySoyFN', function=Function(arguments='{"workspace_id": "vehicle_operations", "confidence": 0.95, "reasoning": "The query asks about revenue generated by vehicle types, which relates to vehicle usage and performance metrics. This falls under vehicle operations as it involves analyzing vehicle-related data to assess financial output by type."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âš ï¸  Validation errors: ["Invalid relevant_columns: ['revenue']"]
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_7QUVrfyMfDbYj7ZqxcdrWROZ', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query asks about trips completed in the last 7 days, which directly relates to mobility data involving trip tracking and time-based analysis. Keywords like \'trips\' and \'last 7 days\' are strongly indicative of the mobility domain."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_1J0vbghLzNl78ppxMJ4Nn7Hc', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves \'completed trips\' and \'revenue\', which are key elements in mobility-related data. The focus on trips and financial outcomes (revenue) from trips aligns with the mobility workspace, which handles trip details, driver, vehicle, and city data."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_5wfZGPiYYo7W7GB9RBC1myxo', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves \'trips\' and \'scheduled for today\', which are key indicators of mobility-related data. This falls under the mobility workspace as it pertains to trip scheduling, a core aspect of mobility operations."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_TkdJC5BikjO9mHKMnr8hxSUN', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves trip details, driver name, customer name, and pickup city, which are all key elements in the mobility domain. These elements are typically associated with trip tracking, driver-customer interactions, and geographic data, making \'mobility\' the most appropriate workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_3VgBFb9Gst8MlJFGuaWql6YP', function=Function(arguments='{"workspace_id": "customer_analytics", "confidence": 0.95, "reasoning": "The query asks for the top 5 customers by total spending, which directly relates to customer behavior and lifetime value analysis. This falls under the domain of Customer Analytics."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_tStQCXbzojjGpCSumhyzXykv', function=Function(arguments='{"workspace_id": "vehicle_operations", "confidence": 0.95, "reasoning": "The query asks about vehicle make and model in relation to the number of trips, which is directly related to vehicle usage and performance. This falls under vehicle operations as it involves analyzing vehicle usage patterns and trip data."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_crlkbqmWtGArhGEngy4nAyPs', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves trips and driver names, which are key elements in the mobility domain. The mention of \'Seattle\' further specifies a geographic context relevant to trip data, making \'mobility\' the most appropriate workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_zkzA4ditoq3VvXJ0fuqiYjF7', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves \'drivers\' and \'New York\', which are key elements in mobility-related data. The intent is to retrieve active drivers in a specific city, which aligns with mobility operations such as trip management, driver assignments, and city-specific vehicle operations."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_DVPVIC1hDPgTVQoMX9Fqzgmy', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves \'completed trips\' and \'Tesla vehicles,\' which are directly related to mobility operations, including trip tracking and vehicle usage. The focus on trips and vehicles aligns with the mobility workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_XG0dmL2CI9bljze9IxXW1ebF', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query asks about \'trips\' and their \'cost\', which directly relates to mobility data involving trip details and pricing. This is a clear match for the mobility workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_H5Yh9tNlnBvdrB8gXQK7vdjJ', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query is about drivers and their ratings, which falls under the mobility domain as it involves driver performance and trip-related metrics."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_6TJEqJ0UxWET9FwszNR2OGOo', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query asks about \'longest trips by duration,\' which directly relates to trip data, duration, and travel metrics. These are core aspects of the mobility domain, which deals with trips, drivers, vehicles, and city details. The intent is to analyze trip performance based on duration, fitting squarely within the mobility workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_icmOwqxWLWMGEiioRBSWrVMu', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves drivers and trips, which are core elements of the mobility domain. The intent is to analyze driver performance based on trip counts, which aligns with mobility-related analytics."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_WTwWPuEslkmZNkOyaGHbDvA8', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves trips and cities, which are core elements of the mobility domain. The intent is to analyze trip volume across cities, which aligns with mobility analytics."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_cMOo4tQD9pY80ZBfg4WlHKWG', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves \'trips\' and \'status\', which are key elements in mobility-related data. The intent is to count trips by their status, which aligns with tracking trip lifecycle states in a mobility system."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_dW5I2rwWbwyVjd2PsMU5PISH', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves \'trip amount\' and \'trip status\', which are directly related to trip data, a core component of the mobility domain. The focus on trip metrics aligns with mobility workspaces that track trip details, statuses, and financials."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_kChw1oWI3kGYxaihn4P3M6EW', function=Function(arguments='{"workspace_id": "customer_analytics", "confidence": 0.95, "reasoning": "The query asks for total revenue by payment method, which involves analyzing customer transactions and payment behavior. This falls under customer analytics as it focuses on customer-related financial data and transaction patterns."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_sQL81u4SE8USp7ybJdEezeAw', function=Function(arguments='{"workspace_id": "promotions", "confidence": 0.95, "reasoning": "The query mentions \'promotions\' and asks about trips that used promotions, which directly relates to marketing campaigns and discounts. This falls under the promotions workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_L86hF0WEcmCn4fj9RYaH5XtA', function=Function(arguments='{"workspace_id": "promotions", "confidence": 0.95, "reasoning": "The query asks about \'total discount applied from promotions,\' which directly relates to promotions, discounts, and marketing campaigns. The keywords \'discount\' and \'promotions\' strongly indicate the promotions workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_i70ZirxTsQ26ARD8vxG5Vm0h', function=Function(arguments='{"workspace_id": "customer_analytics", "confidence": 0.95, "reasoning": "The query asks about \'average lifetime value of customers,\' which directly relates to customer behavior and financial value over time. This is a core concept in customer analytics, making \'customer_analytics\' the most appropriate workspace."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_9ZuldoQTv09fHz1DZuPhVq61', function=Function(arguments='{"workspace_id": "customer_analytics", "confidence": 0.95, "reasoning": "The query asks about customer sign-ups over time, which relates to customer behavior and acquisition metrics. This falls under customer analytics as it involves tracking customer activity and lifecycle events."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_5bFr1W6fKoDlBaRR90LNZviV', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query asks about trip count per driver, which involves trips and driver details, both of which are core elements of the mobility domain. The intent is to analyze driver activity in terms of trip frequency, which aligns with mobility-related analytics."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls
  ğŸ” Debug - message.tool_calls: [ChatCompletionMessageFunctionToolCall(id='call_6Nw0hI5sw1W1wzm8F19L3KmP', function=Function(arguments='{"workspace_id": "mobility", "confidence": 0.95, "reasoning": "The query involves drivers, trips, and ratings, which are core elements of the mobility domain. The focus on completed trips and average rating aligns with mobility-related analytics about driver performance and trip history."}', name='classify_intent'), type='function', index=0, name=None)]
  ğŸ” Debug - message.content: None
  âœ… Intent Agent: Using structured tool_calls
  âœ… Table Agent: Using structured tool_calls
  âœ… Column Prune Agent: Using structured tool_calls
  âœ… SQL Generation Agent: Using structured tool_calls

âœ“ Post-tuning evaluation saved to evaluation_results_post_tuning.json

--------------------------------------------------------------------------------
POST-TUNING METRICS:
--------------------------------------------------------------------------------
Overall Accuracy: 35.3%
Average Latency: 1141.4ms
Total Tokens: 70,535
Estimated Cost: $0.0353
Reward Score: 0.475

================================================================================
STEP 7: COMPARISON REPORT
================================================================================

--------------------------------------------------------------------------------
METRICS COMPARISON:
--------------------------------------------------------------------------------

ğŸ“Š ACCURACY:
  Baseline:    75.46%
  Post-tuning: 54.97%
  Change:      -27.15% âŒ

âš¡ LATENCY:
  Baseline:    1412.8ms
  Post-tuning: 1141.4ms
  Change:      +19.21% âœ…

ğŸ’° COST:
  Baseline:    $0.0419
  Post-tuning: $0.0353
  Change:      +15.90% âŒ

ğŸ¯ REWARD SCORE:
  Baseline:    0.596
  Post-tuning: 0.475
  Change:      -0.122 âŒ

âœ“ Comparison report saved to sft_comparison_report.json

================================================================================
âœ… SFT WORKFLOW COMPLETED
================================================================================
